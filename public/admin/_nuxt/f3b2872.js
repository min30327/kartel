(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{396:function(t,e,n){var content=n(405);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(39).default)("525d512a",content,!0,{sourceMap:!1})},404:function(t,e,n){"use strict";n(396)},405:function(t,e,n){var r=n(38)(!1);r.push([t.i,"#p-admin .p-admin__score-board--wrapper[data-v-cdb7a716]{padding:20px 40px;border-radius:12px;background:#1f252e;margin-bottom:30px}@media (max-width:767px){#p-admin .p-admin__score-board--wrapper[data-v-cdb7a716]{padding:20px}}#p-admin .p-admin__score-board[data-v-cdb7a716]{display:flex;flex-wrap:wrap;margin-left:-30px;margin-right:-30px}@media (max-width:767px){#p-admin .p-admin__score-board[data-v-cdb7a716]{margin-left:-20px;margin-right:-20px}}#p-admin .p-admin__score-board .p-admin__score--item[data-v-cdb7a716]{margin:0 30px}@media (max-width:767px){#p-admin .p-admin__score-board .p-admin__score--item[data-v-cdb7a716]{margin:0 20px}}#p-admin .p-admin__score-board .p-admin__score--item-label[data-v-cdb7a716]{color:#c4c4c4;font-size:14px;font-weight:700;line-height:1.4}@media (max-width:767px){#p-admin .p-admin__score-board .p-admin__score--item-label[data-v-cdb7a716]{font-size:12px}}#p-admin .p-admin__score-board .p-admin__score--item-count[data-v-cdb7a716]{font-size:70px;line-height:70px;margin-bottom:20px}@media (max-width:767px){#p-admin .p-admin__score-board .p-admin__score--item-count[data-v-cdb7a716]{font-size:40px;line-height:40px;margin-bottom:10px}}#p-admin .p-admin__lists[data-v-cdb7a716]{overflow-x:auto;background-color:#1f252e;border-radius:6px;padding:10px 0}#p-admin .c-table[data-v-cdb7a716]{width:100%;border-collapse:collapse}#p-admin .c-table thead tr th[data-v-cdb7a716]{font-size:12px;color:#c4c4c4;text-align:left;padding:5px 15px;white-space:nowrap}#p-admin .c-table tbody tr td[data-v-cdb7a716]{font-size:14px;color:#c4c4c4;padding:8px 15px;white-space:nowrap}#p-admin .c-table tbody tr:nth-child(odd) td[data-v-cdb7a716]{background:#0d1a24}",""]),t.exports=r},416:function(t,e,n){"use strict";n.r(e);var r=n(4),o=(n(26),n(7),n(13),n(15),n(247),n(31),n(156),{middleware:["auth"],layout:"admin",head:function(){return{title:"Dashboard｜"}},asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URLSearchParams(window.location.search),e.next=3,t.$axios.$get("/Users/counts");case 3:return r=e.sent,e.next=6,t.$axios.$get("/Users",{params:n});case 6:return o=e.sent,e.abrupt("return",{users:o.data,count:r.data});case 8:case"end":return e.stop()}}),e)})))()},data:function(){return{processing:!0,users:[],count:{member:0,ovice_registered:0,ovice_unregistered:0,withdrawal:0},paginate:{}}},mounted:function(){return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{ovice_register:function(t,e){var n=this;this.processing=!0,this.$axios.get("/Users/ovice_register/"+t.id).then((function(e){t.ovice_registered=1,n.get_count(),n._toast("success","登録済みにしました。")})).catch((function(t){n._toast("error","登録済みにできませんでした。")})).finally((function(){n.processing=!1}))},ovice_unregister:function(t,e){var n=this;this.processing=!0,this.$axios.get("/Users/ovice_unregister/"+t.id).then((function(e){t.ovice_registered="",n.get_count(),n._toast("success","登録を解除しました。")})).catch((function(t){n._toast("error","登録を解除できませんでした。")})).finally((function(){n.processing=!1}))},get_count:function(){var t=this;this.$axios.$get("/Users/counts").then((function(e){t.count=e.data}))},fetch:function(){var t=arguments,e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:1,e.processing=!0,o=new URLSearchParams(window.location.search),n.next=5,e.$axios.get("/Users?page="+r,{params:o}).then((function(t){e.users=t.data.data})).finally((function(){e.processing=!1}));case 5:case"end":return n.stop()}}),n)})))()},_toast:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.$toast[t](e,{position:"top-right"})}}}),c=(n(404),n(9)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"p-admin"}},[n("div",{staticClass:"c-page__container"},[n("div",{staticClass:"p-admin__score-board--wrapper"},[n("div",{staticClass:"p-admin__score-board"},[n("div",{staticClass:"p-admin__score--item"},[n("h4",{staticClass:"p-admin__score--item-label"},[t._v("現在会員数")]),t._v(" "),n("div",{staticClass:"p-admin__score--item-count",domProps:{textContent:t._s(t.count.member)}})]),t._v(" "),n("div",{staticClass:"p-admin__score--item"},[n("h4",{staticClass:"p-admin__score--item-label"},[t._v("oVice登録済み")]),t._v(" "),n("div",{staticClass:"p-admin__score--item-count",domProps:{textContent:t._s(t.count.ovice_registered)}})]),t._v(" "),n("div",{staticClass:"p-admin__score--item"},[n("h4",{staticClass:"p-admin__score--item-label"},[t._v("oVice未登録")]),t._v(" "),n("div",{staticClass:"p-admin__score--item-count",domProps:{textContent:t._s(t.count.ovice_unregistered)}})]),t._v(" "),n("div",{staticClass:"p-admin__score--item"},[n("h4",{staticClass:"p-admin__score--item-label"},[t._v("解約")]),t._v(" "),n("div",{staticClass:"p-admin__score--item-count",domProps:{textContent:t._s(t.count.withdrawal)}})])])]),t._v(" "),n("div",{staticClass:"p-admin__lists"},[n("table",{staticClass:"c-table c-table__striped"},[t._m(0),t._v(" "),n("tbody",t._l(t.users.data,(function(e,r){return n("tr",[n("td",{domProps:{textContent:t._s(e.id)}}),t._v(" "),n("td",{domProps:{textContent:t._s(e.name)}}),t._v(" "),n("td",{domProps:{textContent:t._s(e.email)}}),t._v(" "),n("td",{domProps:{textContent:t._s(e.ovice_email)}}),t._v(" "),n("td",[e.ovice_registered?n("span",[t._v("登録済み")]):t._e(),t._v(" "),e.ovice_registered?t._e():n("span",[t._v("未登録")])]),t._v(" "),n("td",[e.ovice_registered?n("button",{staticClass:"c-button__small c-button__reset c-button__secondary",on:{click:function(n){return t.ovice_unregister(e,r)}}},[t._v("登録を解除する")]):t._e(),t._v(" "),e.ovice_registered?t._e():n("button",{staticClass:"c-button__small c-button__reset c-button__primary",attrs:{disabled:"subscribed"!=e.status},on:{click:function(n){return t.ovice_register(e,r)}}},[t._v("登録済みにする")])]),t._v(" "),n("td",[""==e.status?n("span",[t._v("非会員")]):t._e(),t._v(" "),"subscribed"==e.status?n("span",[t._v("会員")]):t._e(),t._v(" "),"cancelled"==e.status?n("span",[t._v("退会")]):t._e()])])})),0)])]),t._v(" "),n("div",{staticClass:"c-admin__pagination"},[n("pagination",{attrs:{data:t.users},on:{"pagination-change-page":t.fetch}})],1)])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("ID")]),t._v(" "),n("th",[t._v("お名前")]),t._v(" "),n("th",[t._v("メールアドレス")]),t._v(" "),n("th",[t._v("oViceメールアドレス")]),t._v(" "),n("th",[t._v("ホワイトリスト")]),t._v(" "),n("th",[t._v("ホワイトリスト登録")]),t._v(" "),n("th",[t._v("ステータス")])])])}],!1,null,"cdb7a716",null);e.default=component.exports}}]);